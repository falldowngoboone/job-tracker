<!DOCTYPE html>
<html lang="en" ng-app="hotsheet">
<head>
  <meta charset="UTF-8">
  <title>Ryan's Hotsheet</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div id="hotsheet" ng-controller="hotsheetCtrl">

    <div class="section">

      <h2 class="banner"><span ng-model="todayJobs.edit" ng-click="todayJobs.edit=!todayJobs.edit">Working on Today, {{date}}</span> <span ng-show="todayJobs.edit" ng-click="clients.push({name:'New Client',projects:[],today:[]})">+</span></h2>



      <div class="client" ng-repeat="client in clients">

        <h3>
          <span ng-click="toggleEdit(client.today)">{{client.name}}</span>
          <form ng-submit="toggleEdit(client.today)" ng-show="client.today.edit">
            <input type="text" ng-model="client.name">
            <span ng-click="addToday(client)">Add New Item</span> |
            <span ng-click="addMeeting(client)">Add New Meeting</span> |
            <span ng-click="deleteClient(client)">Delete {{client.name}}</span>
          </form>
        </h3>
        <ul>
          <li class="{{job.status}}" ng-repeat-start="job in client.today">
            <span ng-click="toggleEdit(job)">{{job.item}}</span>
          </li>
          <form name="form" ng-submit="toggleEdit(job)" ng-show="job.edit" ng-repeat-end>
            <input type="text" ng-model="job.item">
            <select type="text" ng-model="job.status">
              <option value="normal">normal</option>
              <option value="need">need</option>
              <option value="late">late</option>
              <option value="alert">alert</option>
            </select>
            <span ng-click="deleteToday(job, client)">Delete</span><br>
            <input type="submit" value="Done">

          </form>
        </ul>

      </div>

    </div>


    <div class="section">

      <h2 class="banner"><span ng-model="todayJobs.edit" ng-click="hotsheetJobs.edit=!hotsheetJobs.edit">Hotsheet</span> <span ng-show="hotsheetJobs.edit" ng-click="clients.push({name:'New Client',projects:[],today:[]})">+</span></h2>

      <div class="client" ng-repeat="client in clients">

        <h3>
          <span ng-click="toggleEdit(client)">{{client.name}}</span>
          <form ng-submit="toggleEdit(client)" ng-show="client.edit">
            <input type="text" ng-model="client.name">
            <span ng-click="addProject(client)">Add New Project</span> |
            <span ng-click="addMeeting(client)">Add New Meeting</span> |
            <span ng-click="deleteClient(client)">Delete {{client.name}}</span>
          </form>
        </h3>
        <ul>
          <li class="{{project.status}}" ng-repeat-start="project in client.projects | orderBy:['-!atv', 'atv']" ng-click="toggleEdit(project)" ng-show="!project.edit">
            {{project.name}} &ndash;
            <span class="{{task.status}}" ng-repeat="task in project.tasks | orderBy:['-!due', 'due']">
              {{task.item}}<span ng-show="task.due"> ({{task.due}})</span><span ng-show="!$last">,</span>
            </span>
            <span ng-show="project.atv">(ATV {{project.atv}})</span>
            <span class="alert" ng-hide="project.jof">
              need JOF
            </span>
          </li>
          <form name="form" ng-submit="toggleEdit(project)" ng-show="project.edit" ng-repeat-end>
            <strong ng-click="toggleEdit(project)">{{project.name}}</strong> |
            <span ng-click="project.tasks.unshift({item:'New task'})">Add Task</span> |
            <span ng-click="deleteProject(project, client)">Delete Project</span><br>
            <input type="text" ng-model="project.name">
            <select type="text" ng-model="project.status">
              <option value="normal">normal</option>
              <option value="need">need</option>
              <option value="late">late</option>
              <option value="alert">alert</option>
              <option value="collected">collected</option>
            </select>
            <input type="text" ng-model="project.atv">
            <input type="checkbox" ng-model="project.jof" id="jof">
            <label for="job">JOF</label> <br>
            <strong ng-click="toggleEdit(project)">Tasks:</strong><br>
            <input type="text" ng-repeat-start="task in project.tasks | orderBy:['-!due', 'due']" ng-model="task.item">
            <select type="text" ng-model="task.status">
              <option value="normal">normal</option>
              <option value="need">need</option>
              <option value="late">late</option>
              <option value="alert">alert</option>
            </select>
            <input type="text" ng-model="task.due">
            <span ng-click="deleteTask(task, project, client)">Delete Task</span><br ng-repeat-end>
            <input type="submit" value="Done">

          </form>
        </ul>

        <div ng-show="client.meeting" class="meeting">
          <p class="{{client.meeting.status}}">
            Next {{client.name}} Meeting: {{client.meeting.date}}
            <span class="alert" ng-hide="client.meeting.jof">
              need JOF
            </span>
          </p>
          <ul ng-show="client.meeting.boards">
            <li class="{{board.status}}" ng-repeat="board in client.meeting.boards">
              {{board.board}}
            </li>
          </ul>
        </div>

      </div>

    </div>

    <br><br><br><br><br>
  </div>

  <script src="js/vendor/angular/angular.min.js"></script>
  <script src="js/ng-hotsheet.js"></script>

</body>
</html>